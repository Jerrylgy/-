
第五章  时间角度
5.1 概述
移动数据的空间分布是空间情景（spatial situations）聚合和简化后的代表，可以用来从空间位置和存在的移动对象的移动特征的角度对时间单元进行刻画。空间情景作为复杂的结构体，很难去分析其所有细节。我们通常以一种聚合的形式来对其处理。从时间角度出发处理移动数据，就是将移动数据以不同时间单元内空间分布的形式进行处理（spatial distribution）。
5.2 时间特征
时空聚合（spatio-temporal aggregation）的结果可以从两个互补的方面来看待。一是在不同位置的属性值的时间序列集合（这就是从空间角度出发对移动进行分析）。二是不同时间单元内空间分布的序列。空间分布即是空间情景的聚合代表。一个空间分布包括不同地点的对象存在数量以及流动等级（flow magnitude）。所谓流动等级即是不同地点之间移动的对象的数量以及它们的移动的次数。对象的移动特征被聚合到地点的特征以及地点之间的连接，例如速度，平均停留时间，从一地到另一地的平均时间等。因为移动数据的时空聚合产生了两类与对象，地点和连接，有关的聚合属性，一个空间情景通过两种互补的分布来表示。即存在分布（presence distribution）和流动分布（flow distribution）。一个存在分布由存在数量和地点的其他聚合属性的值组成。一个流动分布由流动等级和连接的其他聚合属性的值组成。这些分布可以被看做是空间情景的两个不同方面。
我们可以利用很多可视化手段来表现不同时间单元内的空间情景。例如我们可以利用动态屏幕来序列化地用地图展示空间情景。然而问题在于，当时间单元太多时，这些方法会显得不够有效。
5.2.1 通过空间情景的相似度来对时间进行聚类
当时间单元通过空间情景的相似度来进行聚类时，分析人员可以研究和比较这些聚类的代表性的情景而不是所有的时间单元的情景。因此，聚类可以将一个空间情景的庞大集合减小到可以接受的大小。
在聚类中，不同时间单元的情景之间的相似度可以由指向同一地点的或两个情景之间的连接的欧式距离或曼哈顿距离衡量。一个空间情景的聚类当中的代表性空间情景可以通过计算这个聚类当中所有情景的地点的值或连接的值的平均数或中位数来构建。我们也可以选择这个聚类当中某一个情景来作为代表性空间情景。这个被选择的情景当然应该是这个聚类当中的“中心”情景，也就是和其他聚类成员有最小平均不相似度的那个情景。
下图是对一个赛车数据集的聚类。该数据集中参观者的数据已从时空两方面被聚合。时间方面，已经由30分钟的时间间隔被聚合。空间方面，由测量发生的位置被聚合。上面一行的图片是从存在分布角度出发的聚类。下面一行是从流动等级出发的聚类。

图8 二角度进行赛车数据集聚类
我们可以看到从存在分布角度出发的聚类中，呈现了一种对称的情形。也就是说赛车前的存在分布和赛车后的存在分布相类似。
而从流动等级角度出发的聚类中，呈现了一种不对称的情形。也就是说赛车前后的流动分布很不一样。图一是代表了赛车前一个聚类的流动分布。图四是代表了赛车后的一个聚类的流动分布。可以看出这些聚类在主要流动方向上是相反的。
5.2.2 从空间情景中抽取事件
在空间存在分布中，有些地点的一些数值型属性，例如存在数量，比它周围其他地点的值要显著更高或更低。有时候这种特点仅在某些事件单元内出现，那么这种仅存在有限时间的空间特征可以被视作是空间事件。因此，我们可以从一个空间分布序列中抽取这些事件，并运用分析空间事件的相关的方法对其进行分析。

图8 Flickr用户数据集事件抽取
如上图，我们例如Flickr应用的用户使用数据集进行事件抽取。我们想要抽取那些存在数量比它周围邻居地点的平均存在数量至少大于等于5的地点作为事件。同时，要求这些地点超过事件发生在不超过10%的时间单元中发生。结果我们抽取到了45个空间事件，在186个Zurich地区的网格中，有27个网格包含这些空间事件。
